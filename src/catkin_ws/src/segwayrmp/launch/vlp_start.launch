<launch>
  <!-- Velodyne VLP-16 driver -->
  <arg name="calibration" default="/opt/ros/noetic/share/velodyne_pointcloud/params/VLP16db.yaml"/>

  <include file="$(find velodyne_pointcloud)/launch/VLP16_points.launch">
    <arg name="calibration" value="$(arg calibration)"/>
  </include>

  <!-- Replace Point cloud to LaserScan conversion with laser_scan_matcher_node -->
  <node pkg="laser_scan_matcher" type="laser_scan_matcher_node" name="laser_scan_matcher_node">
    <param name="fixed_frame" value="odom"/>
    <param name="base_frame" value="base_link"/>
    <!-- <param name="use_cloud_input" value="true"/> -->
    <param name="use_odom" value="true"/>
    <param name="publish_tf" value="false"/>

    <remap from="scan" to="scan"/>
  </node>

  <!-- Add a new static_transform_publisher for laser_odom to odom -->
  <!-- <node pkg="tf" type="static_transform_publisher" name="laser_odom_to_odom" args="0.25 0.0 0.2 0.0 0.0 0.0 od laser_odom  40"/> -->

  <!-- Modify the existing static_transform_publisher to publish velodyne to base_link -->
  <node pkg="tf" type="static_transform_publisher" name="velodyne_to_base_link" args="0.25 0.0 0.2 0.0 0.0 0.0 base_link velodyne  40"/>

  <node pkg="tf" type="static_transform_publisher" name="base_link_to_laser" args="0.25 0.0 0.2 0.0 0.0 0.0 /base_link /laser 40" />
</launch>
